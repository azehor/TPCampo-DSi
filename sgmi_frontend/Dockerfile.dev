FROM node:20-alpine
WORKDIR /app

COPY sgmi_frontend/package*.json ./
RUN npm ci

COPY sgmi_frontend/ .

EXPOSE 5173

CMD ["sh", "-lc", "if [ ! -d node_modules ]; then npm ci; fi; npm run dev -- --host 0.0.0.0 --port 5173"]
